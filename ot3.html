<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Akuarium Sticker ‚Äî Hitung Hewan Laut</title>
  <!-- Bootstrap CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: linear-gradient(180deg, #e0f7ff 0%, #f0fcff 100%); min-height:100vh; }
    .aquarium {
      background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(200,240,255,0.2));
      border: 2px solid rgba(0,128,200,0.15);
      border-radius: 12px;
      padding: 12px;
      min-height:120px;
      position:relative;
      overflow:hidden;
      box-shadow: 0 6px 18px rgba(0,0,0,0.06);
    }
    .water-surface {
      position:absolute;
      top:0;
      left:0;
      right:0;
      height:10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.1));
      border-bottom:1px solid rgba(255,255,255,0.6);
    }
    .fish-grid {
      display:flex;
      flex-wrap:wrap;
      gap:6px;
      align-items:flex-end;
      justify-content:flex-start;
      padding-top:18px;
    }
    .fish-sticker {
      font-size: 26px;
      width:28px;
      height:28px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      user-select:none;
    }
    .controls .form-control-sm { max-width: 140px; }
    .summary-badge { font-size:0.95rem; }
    .small-muted { font-size:0.85rem; color:#555; }
  </style>
</head>
<body>
<div class="container py-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="h3 mb-0">Akuarium Sticker ‚Äî Hitung Hewan Laut üê†</h1>
    <div class="small-muted">Gunakan emoji keyboard (sticker) ‚Äî tanpa gambar/PNG</div>
  </div>

  <!-- Controls -->
  <div class="card mb-3 shadow-sm">
    <div class="card-body">
      <div class="row g-2 align-items-end">
        <div class="col-sm-5 col-md-4">
          <label class="form-label mb-1">Pilih hewan laut (sticker)</label>
          <select id="animalSelect" class="form-select" aria-label="Pilih hewan">
            <!-- Pilihan emoji populer -->
            <option value="üêü">üêü Ikan (fish)</option>
            <option value="üê†">üê† Ikan Tropis (tropical fish)</option>
            <option value="üê°">üê° Ikan Buntal (pufferfish)</option>
            <option value="ü¶Ä">ü¶Ä Kepiting</option>
            <option value="üêô">üêô Gurita</option>
            <option value="ü¶ë">ü¶ë Cumi-cumi</option>
            <option value="üê¨">üê¨ Lumba-lumba</option>
            <option value="üêã">üêã Paus</option>
            <option value="ü™º">ü™º Ubur-ubur</option>
          </select>
        </div>

        <div class="col-auto">
          <label class="form-label mb-1">Jumlah per akuarium</label>
          <input id="countPerTank" type="number" min="0" max="200" value="6" class="form-control form-control-sm" />
          <div class="small-muted mt-1">Maks 200</div>
        </div>

        <div class="col-auto">
          <label class="form-label mb-1">Jumlah akuarium</label>
          <input id="tankCount" type="number" min="1" max="20" value="3" class="form-control form-control-sm" />
          <div class="small-muted mt-1">Maks 20</div>
        </div>

        <div class="col-auto">
          <button id="generateBtn" class="btn btn-primary">Generate Akuarium</button>
        </div>

        <div class="col ms-auto text-end">
          <div class="mb-1 small-muted">Ringkasan total</div>
          <div>
            <span class="badge bg-info summary-badge" id="totalAnimals">Total hewan: 0</span>
            <span class="badge bg-secondary summary-badge" id="totalTanks">Akuarium: 0</span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Aquarium area -->
  <div id="tanksArea" class="row g-3"></div>

  <div class="mt-3 small text-muted">
    Tip: Kamu bisa mengubah hewan/angka untuk masing-masing akuarium setelah dibuat. Semua sticker adalah emoji keyboard.
  </div>
</div>

<!-- Bootstrap JS Bundle CDN -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

<script>
  (function(){
    const animalSelect = document.getElementById('animalSelect');
    const countPerTank = document.getElementById('countPerTank');
    const tankCount = document.getElementById('tankCount');
    const generateBtn = document.getElementById('generateBtn');
    const tanksArea = document.getElementById('tanksArea');
    const totalAnimalsBadge = document.getElementById('totalAnimals');
    const totalTanksBadge = document.getElementById('totalTanks');

    // clamp helpers
    function clamp(n, min, max) { return Math.max(min, Math.min(max, n)); }

    // Create one tank card
    function createTankCard(index, emoji, count) {
      const col = document.createElement('div');
      col.className = 'col-12 col-md-6 col-lg-4';

      const card = document.createElement('div');
      card.className = 'aquarium';
      card.setAttribute('data-tank-index', index);

      // water surface decorative bar
      const surface = document.createElement('div');
      surface.className = 'water-surface';
      card.appendChild(surface);

      // header controls row
      const header = document.createElement('div');
      header.className = 'd-flex justify-content-between align-items-center mb-2 controls';

      const title = document.createElement('div');
      title.innerHTML = `<strong>Akuarium ${index+1}</strong>`;
      header.appendChild(title);

      const ctrl = document.createElement('div');
      ctrl.className = 'd-flex gap-2 align-items-center';

      // animal selector (per tank)
      const sel = document.createElement('select');
      sel.className = 'form-select form-select-sm';
      sel.style.width = '110px';
      // copy options from global animalSelect
      Array.from(animalSelect.options).forEach(opt => {
        const o = document.createElement('option');
        o.value = opt.value;
        o.textContent = opt.textContent;
        sel.appendChild(o);
      });
      sel.value = emoji;

      // count input per tank
      const num = document.createElement('input');
      num.type = 'number';
      num.min = 0; num.max = 200;
      num.value = count;
      num.className = 'form-control form-control-sm';
      num.style.width = '80px';

      // remove tank button
      const removeBtn = document.createElement('button');
      removeBtn.className = 'btn btn-sm btn-outline-danger';
      removeBtn.type = 'button';
      removeBtn.textContent = 'Hapus';

      ctrl.appendChild(sel);
      ctrl.appendChild(num);
      ctrl.appendChild(removeBtn);
      header.appendChild(ctrl);

      card.appendChild(header);

      // fish grid
      const grid = document.createElement('div');
      grid.className = 'fish-grid';
      card.appendChild(grid);

      // footer with plus/minus
      const footer = document.createElement('div');
      footer.className = 'd-flex justify-content-between align-items-center mt-2';

      const leftFoot = document.createElement('div');
      leftFoot.className = 'd-flex gap-2 align-items-center';

      const minus = document.createElement('button');
      minus.className = 'btn btn-sm btn-outline-primary';
      minus.type = 'button';
      minus.textContent = '‚àí';

      const plus = document.createElement('button');
      plus.className = 'btn btn-sm btn-outline-primary';
      plus.type = 'button';
      plus.textContent = '+';

      leftFoot.appendChild(minus);
      leftFoot.appendChild(plus);

      const rightFoot = document.createElement('div');
      rightFoot.innerHTML = `<span class="small-muted">Jumlah: </span> <strong class="mx-1" data-count-display>${count}</strong>`;

      footer.appendChild(leftFoot);
      footer.appendChild(rightFoot);

      card.appendChild(footer);

      // helper to render stickers inside grid
      function renderGrid() {
        const n = clamp(parseInt(num.value)||0, 0, 200);
        grid.innerHTML = '';
        // create n sticker elements
        for (let i=0;i<n;i++){
          const s = document.createElement('div');
          s.className = 'fish-sticker';
          s.textContent = sel.value;
          grid.appendChild(s);
        }
        // update display
        rightFoot.querySelector('[data-count-display]').textContent = n;
        updateSummary();
      }

      // events
      sel.addEventListener('change', renderGrid);
      num.addEventListener('input', () => {
        num.value = clamp(parseInt(num.value)||0, 0, 200);
        renderGrid();
      });
      plus.addEventListener('click', () => {
        num.value = clamp((parseInt(num.value)||0)+1, 0, 200);
        renderGrid();
      });
      minus.addEventListener('click', () => {
        num.value = clamp((parseInt(num.value)||0)-1, 0, 200);
        renderGrid();
      });
      removeBtn.addEventListener('click', () => {
        col.remove();
        updateSummary();
      });

      // initial render
      renderGrid();

      col.appendChild(card);
      return col;
    }

    // update totals summary
    function updateSummary() {
      const tankCols = Array.from(tanksArea.children);
      const totalTanks = tankCols.length;
      let totalAnimals = 0;
      tankCols.forEach(col => {
        const input = col.querySelector('input[type="number"]');
        if (input) totalAnimals += clamp(parseInt(input.value)||0, 0, 200);
      });
      totalAnimalsBadge.textContent = 'Total hewan: ' + totalAnimals;
      totalTanksBadge.textContent = 'Akuarium: ' + totalTanks;
    }

    // generate tanks based on controls
    generateBtn.addEventListener('click', () => {
      const emoji = animalSelect.value;
      const per = clamp(parseInt(countPerTank.value)||0, 0, 200);
      const tanks = clamp(parseInt(tankCount.value)||1, 1, 20);

      // reset area
      tanksArea.innerHTML = '';
      for (let i=0;i<tanks;i++){
        const card = createTankCard(i, emoji, per);
        tanksArea.appendChild(card);
      }
      updateSummary();
      // smooth scroll to tanks
      tanksArea.scrollIntoView({behavior:'smooth'});
    });

    // initial generate on load
    window.addEventListener('load', () => {
      generateBtn.click();
    });

    // keyboard-accessible quick add: press Enter on inputs to generate
    [animalSelect, countPerTank, tankCount].forEach(el => {
      el.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          e.preventDefault();
          generateBtn.click();
        }
      });
    });

  })();
</script>
</body>
</html>